<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Edit Used Car Listing | Buy Smart Auto Sales 365, LLC | Used Cars</title>
    <meta
      name="description"
      content="Buy Smart Auto Sales 365 South Elgin offers a wide selection of quality used cars at competitive prices. Visit us today to find your next vehicle!"
    />
    <meta
      name="keywords"
      content="Buy Smart Auto Sales, Used Cars, South Elgin, Quality Vehicles, Affordable Cars"
    />
    <meta
      name="author"
      content="Buy Smart Auto Sales 365, LLC and Arlo at Lone Wolf IT Services, LLC"
    />
    <meta
      property="og:title"
      content="Edit Used Car Listing | Buy Smart Auto Sales 365, LLC | Used Cars"
    />
    <meta
      property="og:description"
      content="Buy Smart Auto Sales 365 South Elgin offers a wide selection of quality used cars at competitive prices. Visit us today to find your next vehicle!"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.buysmartautosales365.com" />
    <meta property="og:image" content="./images/logo.png" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="styles/styles_white.css" />
    <link rel="stylesheet" href="styles/styles_black.css" />
    <link rel="stylesheet" href="styles/styles_modals_white.css" />
    <link rel="stylesheet" href="styles/styles_modals_black.css" />
    <script src="scripts/auth.js"></script>
    <script src="scripts/accountFunctions.js"></script>
    <script src="scripts/header.js"></script>
    <script src="scripts/footer.js"></script>
    <script src="scripts/preferences.js"></script>
    <script src="scripts/darkmode.js"></script>
    <script src="scripts/modals.js"></script>
    <script src="scripts/editCarListing.js"></script>
    <!-- <script src="scripts/turnstile.js"></script> TODO UNCOMMENT AND ADD TURNSTILES-->
    <script>
      COLLAPSABLE_WIDTH = 1350; // px
      requireLogin = true; // Set to true to require login for this page
      requireUserToBeAdmin = true;
      function ensureCarId(isAdmin) {
        // Parse the current URL
        const params = new URLSearchParams(window.location.search);

        // Check for "id" parameter
        if (!params.has("id")) {
          // No id found, redirect to inventory.html
          window.location.href = isAdmin ? "admin_inventory.html" : "inventory.html";
        }
      }

      window.addEventListener('authChecked', (details) => {
        if(!details || !details.detail || !details.detail.user) {
          return;
        }
        ensureCarId(details?.detail?.user?.adminUser);
      });
    </script>
  </head>
  <body>
    <div class="page" id="main">
      <header class="header">
        <img
          src="images/logo_transparent.png"
          alt="Buy Smart Auto Sales 365 South Elgin logo"
          class="header__logo"
          onclick="location.href='index.html#homeSection';"
        />
        <span class="header__title">Buy Smart Auto Sales 365</span>
        <!-- Header nav: desktop inline / mobile sliding panel -->
        <nav class="header__nav" aria-label="Primary" aria-hidden="true">
          <ul class="header__nav-list">
            <li class="header__nav-item">
              <a
                class="header__nav-link"
                href="index.html#homeSection"
                onclick="closeHeaderNavGlobal()"
                >Home</a
              >
            </li>
            <li class="header__nav-item">
              <a
                class="header__nav-link"
                href="index.html#about"
                onclick="closeHeaderNavGlobal()"
                >About Us</a
              >
            </li>
            <li class="header__nav-item">
              <a
                class="header__nav-link"
                href="inventory.html"
                onclick="closeHeaderNavGlobal()"
                >Inventory</a
              >
            </li>
            <li class="header__nav-item">
              <a
                class="header__nav-link"
                href="contact.html"
                onclick="closeHeaderNavGlobal()"
                >Contact</a
              >
            </li>
            <li class="header__nav-item">
              <a
                class="header__nav-link"
                id="membersLinkSidebar"
                onclick="goToMemberPortal(); closeHeaderNavGlobal();"
                >Sign In</a
              >
            </li>
          </ul>
        </nav>
        <button
          class="header__toggle"
          id="toggleBtn"
          aria-expanded="true"
          aria-controls="sidebar"
        >
          ☰
        </button>
      </header>
      <main class="main">
        <section class="main__section">
          <div id="adminCarEditorRoot" class="admin-editor-root" aria-live="polite"></div>
        </section>
      </main>
      <aside class="main__sidebar" id="sidebar" aria-label="Main navigation">
        <nav class="main__nav">
          <ul class="main__nav-list">
            <li class="main__nav-item">
              <a class="main__nav-link" href="index.html#homeSection">Home</a>
            </li>
            <li class="main__nav-item">
              <a class="main__nav-link" href="index.html#about">About Us</a>
            </li>
            <li class="main__nav-item">
              <a class="main__nav-link" href="inventory.html">Inventory</a>
            </li>
            <li class="main__nav-item">
              <a class="main__nav-link" href="contact.html">Contact</a>
            </li>
            <li class="main__nav-item">
              <a
                class="main__nav-link"
                id="membersLink"
                onclick="goToMemberPortal();"
                >Sign In</a
              >
            </li>
          </ul>
        </nav>
      </aside>
      <footer class="footer">
        <p class="footer__copyright">
          © 2025 Buy Smart Auto Sales 365 LLC | Lone Wolf IT Services LLC | All
          Rights Reserved.
        </p>
        <p class="footer__disclaimer">
          Disclaimer: All vehicle prices, specifications, and availability are
          subject to change without notice. Please contact us for the most
          current information.
        </p>
        <div class="footer__links">
          <a class="footer__link" href="pp.html">Privacy Policy</a>
          <a class="footer__link" href="tos.html">Terms of Service</a>
          <a href="contact.html" class="footer__link">Contact Us</a>
        </div>
        <p class="footer__social-media-text">@BuySmart365</p>
        <div class="footer__social-media-links">
          <button
            class="footer__social-media-button footer__social-media-button-facebook"
            id="facebookBtn"
            aria-label="Facebook"
          >
            Facebook
          </button>
          <button
            class="footer__social-media-button footer__social-media-button-instagram"
            id="instagramBtn"
            aria-label="Instagram"
          >
            Instagram
          </button>
          <button
            class="footer__social-media-button footer__social-media-button-tiktok"
            id="tiktokBtn"
            aria-label="TikTok"
          >
            TikTok
          </button>
          <button
            class="footer__social-media-button footer__social-media-button-youtube"
            id="youtubeBtn"
            aria-label="YouTube"
          >
            YouTube
          </button>
        </div>
      </footer>
    </div>
    <div class="modal modal_type_preview" id="preview-modal">
      <div class="modal__image-container">
        <button
          class="modal-preview-close-button"
          type="button"
          aria-label="Close modal"
        ></button>
        <img src="#" alt="" class="modal__image" />
        <p class="modal__caption"></p>
      </div>
    </div>
  </body>
</html>

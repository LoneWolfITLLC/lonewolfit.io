.main {
    grid-area: main;
    background: transparent;
    margin: 0; /* Centers main content horizontally. */
    overflow-anchor: none;
}
.main__section {
    margin: 20px 20px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.8); /* Semi-transparent white background for better readability */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
    padding: 20px;
    z-index: 1;
    animation: fadeIn 0.8s ease-in;
    scroll-margin-top: 120px; /* Ensures anchor links scroll below header. */
}
.main__section-hidden {
    background: transparent;
    box-shadow: none;
}
.main__section-fit-content {
    display: block;
    width: fit-content;
    max-width: calc(100% - 40px); /* reserve 20px on each side */
    margin: 10px auto;               /* center when there's extra space */
    box-sizing: border-box;
}
.main__section-title {
    text-align: center;
}
/* Sidebar: use width transition instead of collapsing grid column to 0.
   Keeps layout stable and prevents nav items from overlapping. */
.main__sidebar {
    grid-area: sidebar;
    background: transparent;
    transition: width 0.25s ease-in-out forwards, transform 0.25s ease-in-out forwards;
    animation: slideInFromRight 0.25s ease-out forwards;
    /* Remove from document flow and pin to the right side under the fixed header */
    position: fixed;
    top: 100px; /* adjust to match header height; change if header size changes */
    right: 0px;
    width: 280px;         /* default sidebar width matches grid */
    box-sizing: border-box;
    overflow-x: hidden;
    overflow-y: auto;
    min-width: 0;         /* allow container to shrink in grid/flex contexts */
    z-index: 1;
    overflow-anchor: none;
}
.main--scrolled {
    margin-top: 50px !important; /* Adjust margin to account for fixed header height */
    transition: margin-top 0.25s ease-in-out;
}
.main__heading {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 15px;
}

.main__intro,
.main__text {
    font-size: 1em;
    line-height: 1.6;
    color: #333;
    text-align: left;
}

/* Nav layout: prevent shrinking and allow ellipsis on links */
.main__nav {
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    overflow: hidden; /* ensure contents are clipped when sidebar narrows */
}
.main__nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
    width: 100%;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 10px;
}
.main__nav-item {
    margin-top: 0; /* gap handled by list gap */
    font-size: 2em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); /* Subtle text shadow for better readability */
    cursor: pointer;
    flex: 0 0 auto;     /* prevent the item from shrinking */
    min-width: 0;       /* allow proper ellipsis behavior for children */
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 30px;
}
.main__nav-link {
    text-decoration: none;
    color: #333;
    transition: color 0.3s ease-in-out, transform 0.2s ease-in-out, text-shadow 0.3s ease-in-out, opacity 0.2s ease-in-out;
    display: block;             /* make ellipsis work on the whole label area */
    width: calc(100% - 20px);
    padding: 4px 10px;
    overflow: hidden;           /* clip long labels */
    text-overflow: ellipsis;    /* truncate when sidebar narrows */
    white-space: nowrap;
}
.main__nav-link:hover {
    color: #FFF; /* Change link color on hover for better interactivity */
    text-shadow: 3px 2px 6px rgba(255, 255, 255, 0.4); /* Enhance text shadow on hover */
}
.main__nav-link:active {
    transform: scale(0.9);
    opacity: 0.8;
}

/* Collapsed state: keep a small fixed width instead of 0 to avoid overlap */
.page.main--collapsed {
    /* override the page grid so the sidebar column remains a stable small width */
    grid-template-columns: 1fr 0px;
}
.main--collapsed .main__sidebar {
    animation: slideToTheRight 0.25s ease-out forwards;
    top: 100px;
    right: 0px;
    overflow: hidden;
}

/* Keep the hidden modifier only if you explicitly want to entirely remove the sidebar.
   For this setup we no longer auto-hide the sidebar to prevent layout overlap issues. */
.main--collapsed-hidden .main__sidebar {
    display: none; /* Hides the sidebar when in collapsed-hidden state (optional) */
}

@media (max-height: 500px) {
    .main__nav-item {
        font-size: 1.5em; /* Reduce font size on very short viewports to fit more items */
    }
    .main--scrolled {
        margin-top: 30px !important; /* Adjust margin to account for fixed header height */
    }
}

.main__item-centered {
	display: block; /* Block-level for centering. */
	text-align: center; /* Centers content. */
	margin-left: auto !important; /* Horizontally centers element. */
	margin-right: auto !important; /* Horizontally centers element. */
}

/* Ensure the client-type toggle centers reliably */
#clientTypeToggle,
.menu__item-slider.main__item-centered {
    display: block;               /* make margin:auto work */
    margin: 20px auto !important; /* center horizontally, keep top spacing */
    width: auto;                  /* don't stretch full width */
    align-self: center;           /* helps if parent is a flex container */
    text-align: center;
}